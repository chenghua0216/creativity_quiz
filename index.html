<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>立賢 CREATE 創造力亮能光譜</title>
    <!-- 引入 Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* 繪本童趣風格配色定義 */
        :root {
            --primary: #5D4037;       /* 深咖啡色：像繪本的文字 */
            --accent-1: #FF8E72;      /* 珊瑚紅(橘色系)：溫暖活力 */
            --accent-2: #6EC6CA;      /* 天空藍：清新創意 */
            --accent-3: #FFD56B;      /* 奶油黃：快樂 */
            --bg-color: #FFF9E6;      /* 暖奶油色：像圖畫紙 */
            --card-bg: #FFFFFF;
            --text-main: #5D4037;
            --text-light: #8D6E63;
        }

        body {
            font-family: "Comic Sans MS", "Chalkboard SE", "Yu Pearl", "PingFang TC", "Microsoft JhengHei", sans-serif;
            background-color: #E6DBC8; 
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjRTZEQkM4Ii8+CjxwYXRoIGQ9Ik0xIDNoMnYxSDF6IiBmaWxsPSIjRDhDMEE4IiBmaWxsLW9wYWNpdHk9IjAuNSIvPgo8L3N2Zz4='); /* 細微雜點紋理 */
            color: var(--text-main);
            margin: 0;
            padding: 10px; /* 減少外部邊距 */
            display: flex;
            justify-content: center;
            align-items: center; 
            min-height: 100vh;
            box-sizing: border-box;
        }

        .container {
            width: 100%;
            max-width: 700px; /* 稍微放寬容器 */
            background: #FFF; 
            background-image: 
                linear-gradient(90deg, transparent 59px, #FFCCBC 59px, #FFCCBC 61px, transparent 61px),
                linear-gradient(#F0F4C3 1px, transparent 1px);
            background-size: 100% 100%, 100% 30px; 
            background-attachment: local;
            border-radius: 5px 15px 15px 5px; 
            box-shadow: 
                10px 10px 20px rgba(0,0,0,0.15), 
                inset 20px 0 30px rgba(0,0,0,0.02); 
            padding: 30px 30px 30px 70px; /* 縮減上下內距，保留左側裝訂區 */
            position: relative;
            transition: all 0.3s ease;
            border: none;
        }

        /* 螺旋線圈裝訂效果 */
        .container::before {
            content: '';
            position: absolute;
            left: 15px; 
            top: 20px;
            bottom: 20px;
            width: 15px;
            background: radial-gradient(circle at center, #555 30%, transparent 35%);
            background-size: 100% 30px; 
            background-repeat: repeat-y;
            filter: drop-shadow(1px 1px 0px rgba(255,255,255,0.8));
        }

        header { text-align: center; margin-bottom: 20px; position: relative; }
        
        header::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%) rotate(-2deg);
            width: 200px;
            height: 10px;
            background: rgba(255, 142, 114, 0.2); 
            border-radius: 10px;
            z-index: 0;
        }

        h1 { 
            color: var(--primary); 
            margin: 0 0 5px 0; 
            font-size: 1.8rem; 
            font-weight: 900; 
            letter-spacing: 2px;
            position: relative;
            z-index: 1;
        }
        .subtitle { 
            color: var(--text-light); 
            font-size: 0.95rem; 
            line-height: 1.4; 
            font-weight: 600;
        }

        /* 亮能圖示 Grid */
        .spectrum-icons {
            display: grid;
            grid-template-columns: repeat(3, auto);
            justify-content: center; 
            gap: 15px 25px; 
            margin: 20px 0;
        }

        .spectrum-icon-item {
            width: 70px;  
            height: 70px;
            border-radius: 50%; 
            background: #ffffff;
            border: 3px solid #E0E0E0; 
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55); 
            padding: 10px; 
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            overflow: hidden; 
        }

        .spectrum-icon-item:hover, .spectrum-icon-item:active {
            transform: scale(1.1);
            background: #ffffff; 
            box-shadow: 0 6px 12px rgba(255, 142, 114, 0.2);
            border-color: var(--accent-1); 
        }

        .spectrum-icon-item img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* 按鈕 */
        .btn {
            background-color: var(--accent-1); 
            color: white; 
            border: none;
            padding: 10px 30px;
            font-size: 1.1rem;
            border-radius: 50px; 
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 20px auto 0;
            width: fit-content;
            font-weight: 800;
            letter-spacing: 1px;
            box-shadow: 3px 3px 0 rgba(0,0,0,0.15);
        }
        
        @media (hover: hover) {
            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 5px 5px 0 rgba(0,0,0,0.15);
                background-color: #FF7D5D;
            }
        }
        .btn:active {
            transform: translateY(1px);
            box-shadow: 1px 1px 0 rgba(0,0,0,0.15);
        }

        /* 名字輸入區 */
        .name-section {
            display: none;
            text-align: center;
            animation: fadeIn 0.5s;
            padding: 30px 0;
        }

        #user-name-input {
            font-size: 1.6rem;
            padding: 8px 15px;
            border: none;
            border-bottom: 3px dashed var(--accent-1);
            background: transparent;
            color: var(--primary);
            text-align: center;
            font-family: inherit;
            outline: none;
            width: 80%;
            max-width: 250px;
            font-weight: bold;
            transition: border-color 0.3s;
        }

        /* 測驗區塊 */
        .quiz-section { display: none; animation: popIn 0.5s; }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(0,0,0,0.05);
            margin-bottom: 20px;
            border-radius: 6px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--accent-2); 
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 6px;
        }

        #question-container { transition: opacity 0.3s ease; opacity: 1; }

        .question-text {
            font-size: 1.25rem;
            font-weight: 800; 
            margin-bottom: 20px;
            line-height: 1.4;
            color: var(--text-main);
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid var(--accent-3); 
        }

        .options-grid { display: grid; gap: 12px; }
        
        .option-card {
            background: #fff;
            border: 2px solid #DDD; 
            padding: 12px 18px;
            border-radius: 10px; 
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            color: var(--text-main);
            transition: all 0.2s;
            line-height: 1.4;
            -webkit-tap-highlight-color: transparent;
            font-weight: 600;
            box-shadow: 2px 2px 0 #EEE;
        }

        .option-card:active { transform: scale(0.99); background: #FFFDE7; border-color: var(--accent-3); }
        .option-card.selected { border-color: var(--accent-1); background: #FFEBEE; color: var(--primary); box-shadow: none; }

        /* 結果區塊 - 卡片風格優化 */
        .result-section { display: none; animation: popIn 0.8s; }
        
        /* 專屬牌卡容器 */
        .collectible-card {
            background: #FFF;
            border: 6px solid #FFF; 
            border-radius: 16px;
            box-shadow: 
                0 5px 15px rgba(0,0,0,0.1),
                0 0 0 1px rgba(0,0,0,0.05); 
            padding: 0;
            width: 100%;
            max-width: 550px; /* 加寬卡片 */
            margin: 0 auto; 
            overflow: hidden;
            position: relative;
            /* 移除旋轉，節省邊緣空間，確保一頁式 */
            transform: rotate(0deg); 
        }

        /* 卡片頭部：Flex 佈局，Logo 在左 */
        .card-header-flex {
            display: flex;
            align-items: center;
            padding: 20px 25px; /* 緊湊的內距 */
            color: #FFF;
            position: relative;
        }

        .card-avatar-left {
            flex-shrink: 0;
            width: 80px;
            height: 80px;
            background: #FFF;
            border-radius: 50%;
            border: 4px solid #FFF; /* 內白框 */
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            margin-right: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .card-avatar-left img {
            width: 90%;
            height: 90%;
            object-fit: contain;
        }

        .card-info-right {
            flex-grow: 1;
            text-align: left; /* 文字靠左 */
        }

        .card-badge {
            background: rgba(255,255,255,0.25);
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 800;
            letter-spacing: 1px;
            text-transform: uppercase;
            display: inline-block;
            margin-bottom: 5px;
        }

        .card-user-name {
            font-size: 1.6rem;
            font-weight: 900;
            margin: 0;
            line-height: 1.2;
            text-shadow: 1px 1px 0 rgba(0,0,0,0.1);
        }

        .card-title {
            font-size: 1rem;
            opacity: 0.95;
            margin-top: 3px;
            font-weight: 600;
        }

        /* 卡片內容區 */
        .card-body {
            padding: 15px 20px;
            background: #fff;
        }

        .card-chart-container {
            height: 180px; /* 降低高度以適應一頁 */
            width: 100%;
            margin-bottom: 10px;
        }

        .card-slogan {
            font-family: "KaiTi", "BiauKai", serif; 
            font-size: 1.05rem;
            color: var(--accent-1);
            font-weight: bold;
            margin-bottom: 10px;
            font-style: italic;
            text-align: center;
        }

        .card-desc {
            font-size: 0.9rem;
            line-height: 1.5;
            color: #555;
            text-align: justify;
            margin-bottom: 12px;
            background: #F9F9F9;
            padding: 12px;
            border-radius: 8px;
        }

        .card-footer-section {
            border-top: 1px dashed #EEE;
            padding-top: 10px;
            margin-top: 5px;
            text-align: center;
        }
        
        .card-tags {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 6px;
        }
        
        .mini-tag {
            background: #EFF3F4;
            color: #666;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .tag-108 {
            display: block;
            background: var(--accent-3); 
            color: #5D4037;
            padding: 6px 12px;
            border-radius: 8px; 
            font-size: 0.85rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 10px;
        }

        @keyframes popIn {
            0% { opacity: 0; transform: scale(0.98); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed; 
            z-index: 2000; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            background-color: rgba(93, 64, 55, 0.6);
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(2px);
        }
        .modal-content {
            background-color: #FFF9C4;
            padding: 30px;
            border-radius: 2px; 
            width: 85%; 
            max-width: 400px;
            position: relative;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.2);
            text-align: left;
        }
        .close-modal {
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: 24px;
            cursor: pointer;
            font-weight: bold;
            color: #5D4037;
        }
        .modal-title-text {
            font-weight: bold; font-size: 1.2rem; margin-bottom: 10px; color: #5D4037;
            border-bottom: 2px dashed #5D4037; display: inline-block;
        }
        .modal-body-text { font-size: 1rem; line-height: 1.6; color: #333; }

        /* RWD 調整 */
        @media (max-width: 600px) {
            .container { 
                padding: 20px 15px 20px 45px; /* 手機版內距 */
                border-radius: 0; 
                width: 100%;
            } 
            body { padding: 0; }
            .spectrum-icons { gap: 10px; }
            .spectrum-icon-item { width: 60px; height: 60px; }
            
            /* 手機版卡片樣式 */
            .collectible-card { max-width: 100%; border-width: 0; box-shadow: none; border-radius: 10px; }
            /* 手機版頭部：為了省空間，可以稍微縮小 */
            .card-header-flex { padding: 15px; }
            .card-avatar-left { width: 60px; height: 60px; margin-right: 15px; }
            .card-user-name { font-size: 1.4rem; }
            .card-title { font-size: 0.9rem; }
            .btn { margin-top: 15px; }
        }
    </style>
</head>
<body>

<div class="container">
    <div id="start-screen">
        <header>
            <h1>CREATE <br>創造力亮能光譜</h1>
            <div class="subtitle">
                歡迎來到創造力小教室，<br>
                認識你獨一無二的創造力性格！
            </div>
        </header>

        <div class="spectrum-icons">
            <div class="spectrum-icon-item" data-desc="覺察 Consciousness：「覺察」是創造力的起點。它超越了單純的看見，而是指能自我感官調節，細膩地接收內在的情緒波動以及外在環境的細微變化。這是一種勇於面對未知體驗的心理準備狀態。" title="覺察 (Consciousness)">
                <img src="https://github.com/chenghua0216/figures/blob/main/Consciousness.png?raw=true" alt="覺察力">
            </div>
            <div class="spectrum-icon-item" data-desc="表達 Realization：「表達」是內在轉化為外在的過程。這不僅僅是說話或畫畫，而是將無形的想法、複雜的情緒或抽象的觀點，透過適當的媒介（文字、圖像、肢體、聲音等）賦予形式，且能以獨特的方式與世界對話。" title="表達 (Realization)">
                <img src="https://github.com/chenghua0216/figures/blob/main/Realization%20.png?raw=true" alt="表達力">
            </div>
            <div class="spectrum-icon-item" data-desc="驅動 Engagement：「驅動」關乎創造力的續航力。它不是為了外在獎勵獲肯定而做，而是源於內在的熱情、好奇或意義感。這是一種穩定的心理支持力量，讓我們在面對挑戰時，能自我激勵，甚至進入心流狀態的能力。" title="驅動 (Engagement)">
                <img src="https://github.com/chenghua0216/figures/blob/main/Engagement.png?raw=true" alt="驅動力">
            </div>
            <div class="spectrum-icon-item" data-desc="合作 Alignment：「合作」是將個人創造力擴展為集體智慧的關鍵。Alignment 原意為「校準」、「對齊」，這意味著合作不僅是分工，更是頻率的調和。我們需要理解他人的觀點，建立關係，並在保有自我的同時與團隊目標達成一致。這是同理心與社會技巧的綜合展現。" title="合作 (Alignment)">
                <img src="https://github.com/chenghua0216/figures/blob/main/Alignment%20.png?raw=true" alt="合作力">
            </div>
            <div class="spectrum-icon-item" data-desc="探索 Trial：「探索」是對現狀的挑戰與可能性的開拓。允許自己好奇與冒險，也有勇氣脫離舒適圈，去問「為什麼？」和「如果...會怎樣？」。這項能力著重於發散性思考以及對失敗的寬容，因為嘗試過程就存在價值。" title="探索 (Trial)">
                <img src="https://github.com/chenghua0216/figures/blob/main/Trial.png?raw=true" alt="探索力">
            </div>
            <div class="spectrum-icon-item" data-desc="實踐 Execution：「實踐」是創造力旅程的終點，也是新循環的起點。將學習過程的啟發落實為真實生活中的選擇與行動，需要執行力、規劃力以及將抽象概念應用於現實生活的能力。" title="實踐 (Execution)">
                <img src="https://github.com/chenghua0216/figures/blob/main/Execution.png?raw=true" alt="實踐力">
            </div>
        </div>

        <button class="btn" onclick="goToNameScreen()">開始探索</button>

        <div style="text-align: center; margin-top: 30px;">
            <img src="https://github.com/chenghua0216/figures/blob/main/logo.png?raw=true" alt="立賢教育基金會 Logo" style="width: 120px; height: auto;">
        </div>
    </div>

    <div id="name-screen" class="name-section">
        <h2 style="color: var(--primary); margin-bottom: 30px; font-weight: 800;">✎ 請問你的名字是？</h2>
        <input type="text" id="user-name-input" placeholder="請寫下你的暱稱..." maxlength="10">
        <button class="btn" onclick="startQuiz()">前往測驗</button>
    </div>

    <div id="quiz-screen" class="quiz-section">
        <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
        <div id="question-container">
            <div class="question-text" id="q-text"></div>
            <div class="options-grid" id="options-area"></div>
        </div>
    </div>

    <div id="result-screen" class="result-section">
        <div id="card-placeholder"></div>
        <button class="btn" onclick="location.reload()" style="margin-top: 20px; padding: 8px 25px; font-size: 1rem;">再玩一次 ↺</button>
    </div>
</div>

<div id="info-modal" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <div id="modal-text"></div>
    </div>
</div>

<script>
    // === 資料庫設定 ===
    const traits = {
        C: "覺察力", R: "表達力", D: "驅動力", A: "合作力", T: "探索力", E: "實踐力"
    };

    const questions = [
        { text: "當我感到「創造力消失」的時候，我通常會？", options: [{ text: "閉上眼什麼都不做，讓自己休息，靜靜等待靈感回流。", scores: { C: 3, D: 1 } }, { text: "雖然痛苦，但我會強迫自己繼續做下去，直到突破瓶頸。", scores: { D: 3, E: 1 } }, { text: "找朋友聊聊天，或許他們的幾句話就能重新點燃我。", scores: { A: 3, R: 1 } }] },
        { text: "如果必須用一種樂器來代表你的個性，你會選擇？", options: [{ text: "鋼琴或小提琴。能細膩地表達情感，也能展現豐富的層次。", scores: { R: 3, C: 1 } }, { text: "爵士鼓。充滿節奏感與爆發力，是驅動整首樂曲的心臟。", scores: { D: 3, E: 1 } }, { text: "電子合成器。充滿實驗性，能創造出前所未有的聲音。", scores: { T: 3, R: 1 } }] },
        { text: "在路邊看到一個被丟棄、生鏽的鐵罐，你的第一個反應是？", options: [{ text: "覺得它生鏽的紋理和顏色很美，彷彿看見了時間的痕跡。", scores: { C: 3, R: 1 } }, { text: "思考它為什麼會在這裡？原本是裝什麼的？背後有什麼故事？", scores: { T: 3, C: 1 } }, { text: "想撿起來帶回去，也許能在下次創作或改造中派上用場。", scores: { E: 3, T: 1 } }] },
        { text: "找出一件原本被視為「廢棄物」的紙箱，你會如何賦予它新生命？", options: [{ text: "拿起畫筆在上面塗鴉，把它變成一件獨特的裝置藝術。", scores: { R: 3, T: 1 } }, { text: "動手裁剪拼貼，把它改造成實用的收納盒或貓屋。", scores: { E: 3, A: 1 } }, { text: "邀請孩子或朋友一起來，用它搭建一個秘密基地。", scores: { A: 3, D: 1 } }] },
        { text: "如果受邀設計一台「讓生氣的人瞬間笑出來」的機器，你的設計核心是？", options: [{ text: "感應情緒機制。先同理他的憤怒，再給予溫暖的擁抱。", scores: { C: 3, A: 1 } }, { text: "瘋狂實驗室。隨機噴出彩帶、播放怪聲音，用出乎意料的方式逗樂他。", scores: { T: 3, R: 1 } }, { text: "搔癢機械手臂。直接針對生理反應，用最實際的物理方式讓他笑。", scores: { E: 3, D: 1 } }] },
        { text: "想像一種混合了兩種現有動物的新生物，你會最在意牠的什麼？", options: [{ text: "牠的外型是否獨特美觀，我會想把牠詳細地畫下來。", scores: { R: 3, C: 1 } }, { text: "牠在生態系中的功能，例如是否能幫助環境或保護其他弱小動物。", scores: { A: 3, E: 1 } }, { text: "牠的生存能力，例如是否有強大的翅膀或適應極端氣候的能力。", scores: { T: 3, D: 1 } }] },
        { text: "如果真的能跟植物溝通，你會對路邊的小草說什麼？", options: [{ text: "「你在這裡過得好嗎？有沒有什麼不舒服的地方？」", scores: { C: 3, A: 1 } }, { text: "「你的根是怎麼往下鑽的？教我你生存的秘訣！」", scores: { T: 3, E: 1 } }, { text: "我不會說話，我會對著它唱歌，分享我的快樂。", scores: { R: 3, D: 1 } }] },
        { text: "想像世界上的地心引力突然減半，你覺得生活最大的改變是？", options: [{ text: "新的運動與交通方式會誕生，人類將發明更多飛行的裝置。", scores: { T: 3, E: 1 } }, { text: "人們的肢體語言會變得更輕盈優雅，舞蹈和表演藝術會徹底改變。", scores: { R: 3, C: 1 } }, { text: "大家能更輕鬆地搬運重物，互相幫助的門檻變低了。", scores: { A: 3, E: 1 } }] },
        { text: "關於「說謊」和「講故事」，你認為這兩者的差別在於？", options: [{ text: "意圖的不同。一個是為了欺騙，一個是為了啟發或感動。", scores: { C: 3, A: 1 } }, { text: "技巧的高低。講故事需要更高的架構能力與表達技巧。", scores: { R: 3, E: 1 } }, { text: "結果的真實性。故事是為了創造一個新的真實，謊言是為了掩蓋舊的真實。", scores: { T: 3, C: 1 } }] },
        { text: "如果 AI 機器人畫了一幅很美的畫，你認為它具有創造力嗎？", options: [{ text: "不算。它缺乏「靈魂」與「內在驅動力」，只是模仿數據的結果。", scores: { D: 3, C: 1 } }, { text: "算。只要產出的結果能解決視覺問題或帶來美感，就是創造。", scores: { E: 3, T: 1 } }, { text: "不重要。重要的是這幅畫能否連結人心，引發大家的討論。", scores: { A: 3, R: 1 } }] },
        { text: "現在試著用你的「非慣用手」寫下名字或畫個圓，你的感受是？", options: [{ text: "好不舒服，但我喜歡這種挑戰大腦、跳脫舒適圈的感覺。", scores: { T: 3, D: 1 } }, { text: "線條歪歪扭扭的，這其實有一種拙趣和獨特的美感。", scores: { R: 3, C: 1 } }, { text: "我會多練習幾次，直到我能控制肌肉，把它寫得工整為止。", scores: { E: 3, D: 1 } }] },
        { text: "如果要發明一種新的「打招呼方式」並教給朋友，你會設計？", options: [{ text: "一個包含擊掌、轉圈的複雜動作，充滿活力與儀式感。", scores: { D: 3, E: 1 } }, { text: "一個眼神交流搭配手勢，能瞬間確認彼此的默契與連結。", scores: { A: 3, C: 1 } }, { text: "一個搞怪的鬼臉或聲音，目的是為了打破尷尬，讓氣氛輕鬆。", scores: { R: 3, T: 1 } }] },
        { text: "請欣賞馬諦斯的剪紙名作《蝸牛》。看著這幅畫，你當下最強烈的感受是？<br><br><img src='https://uploads4.wikiart.org/images/henri-matisse/the-snail-1953.jpg' alt='馬諦斯-蝸牛' style='width: 100%; max-width: 250px; border-radius: 15px; border:2px dashed #E0C09E; margin-top: 15px;'>", options: [{ text: "真神奇！明明只是色塊的拼貼，閉上眼，彷彿能感覺到蝸牛緩慢的移動與生命力。", scores: { C: 3, A: 1 } }, { text: "哇，我沒想到這是蝸牛耶！我也想拿剪刀隨意剪貼，試試看只用幾個色塊能拼出什麼有趣的東西。", scores: { T: 3, D: 1 } }, { text: "馬諦斯捨棄了細節，將蝸牛的概念抽象化成為純粹的顏色與結構。", scores: { R: 3, E: 1 } }] },
        { text: "如果要寫一本標題為《2983》的小說，你的直覺告訴你，這會是一個什麼樣的故事？<br><br><img src='https://raw.githubusercontent.com/chenghua0216/creativity_quiz/16a01d6ea0a6ac5d020467376ad8ececa0ac0684/2983.png' alt='2983' style='width: 100%; max-width: 250px; border-radius: 15px; border:2px dashed #E0C09E; margin-top: 15px;'>", options: [{ text: "設定在西元2983年的未來寓言。探討在高度科技或末日後的世界，人類是否還保有身而為人的本質和情感。", scores: { T: 3, C: 1 } }, { text: "這是一個計數。可能是「想念你的第2983天」或「第2983封沒寄出的信」。這是關於記憶與情感的細膩故事。", scores: { R: 3, A: 1 } }, { text: "這是一個關鍵密碼、倒數秒數，代號2983的機密行動。故事節奏緊湊，主角必須在極限壓力下完成任務。", scores: { D: 3, E: 1 } }] }
    ];

    const archetypes = {
        C: {
            title: "澄澈的哲思者",
            img: "https://github.com/chenghua0216/figures/blob/main/Consciousness.png?raw=true",
            slogan: "「於靜默中聽見雷鳴，於微塵中看見世界。」",
            desc: "你的優勢亮能是「覺察力」。你擁有極敏銳的感知能力，這不僅是對外在環境的觀察，更是對內在情緒的覺知。在喧囂的世界中，你總能保持清醒，看見別人忽略的本質。",
            code108: "★ 108 課綱 (A1 身心素質)：覺察力是「自我精進」的起點。",
            celebs: ["達賴喇嘛", "珍·古德", "是枝裕和"]
        },
        R: {
            title: "靈魂的轉譯者",
            img: "https://github.com/chenghua0216/figures/blob/main/Realization%20.png?raw=true",
            slogan: "「將無形化為有形，讓世界聽見你的頻率。」",
            desc: "你的優勢亮能是「表達力」。你是天生的溝通者，擅長將抽象的想法、複雜的情緒轉化為具體的作品。無論透過文字、藝術或語言，你總能賦予無形事物有形的感動。",
            code108: "★ 108 課綱 (B1 符號運用)：這正是「表達力」的核心。",
            celebs: ["宮崎駿", "J.K. 羅琳", "林懷民"]
        },
        D: {
            title: "熱情的燃燈者",
            img: "https://github.com/chenghua0216/figures/blob/main/Engagement.png?raw=true",
            slogan: "「內在的火炬，是推動世界前進的燃料。」",
            desc: "你的優勢亮能是「驅動力」。你擁有源源不絕的內在引擎，不需要外在獎賞，挑戰本身就是你的養分。你容易進入「心流」狀態，擁有強大的心理韌性。",
            code108: "★ 108 課綱 (A1/自主行動)：驅動力是「自主行動」的燃料。",
            celebs: ["Kobe Bryant", "馬友友", "湯姆·克魯斯"]
        },
        A: {
            title: "溫暖的編織者",
            img: "https://github.com/chenghua0216/figures/blob/main/Alignment%20.png?raw=true",
            slogan: "「一個人走得快，一群人走得遠。」",
            desc: "你的優勢亮能是「合作力」。你是團隊中的黏著劑，深知連結的力量。你擅長傾聽、換位思考，並能整合不同意見，創造 1+1>2 的共好價值。",
            code108: "★ 108 課綱 (C2 人際關係)：具備理解他人與合作素養。",
            celebs: ["歐巴馬", "歐普拉", "德蕾莎修女"]
        },
        T: {
            title: "無畏的拓荒者",
            img: "https://github.com/chenghua0216/figures/blob/main/Trial.png?raw=true",
            slogan: "「未知不是恐懼，而是邀請。」",
            desc: "你的優勢亮能是「探索力」。你的好奇心是你最大的資產。你不怕犯錯，甚至享受試錯的過程。你喜歡問「為什麼」和「如果...會怎樣」，是打破框架的創新者。",
            code108: "★ 108 課綱 (A2 系統思考)：解決問題的基石。",
            celebs: ["伊隆·馬斯克", "理查·費曼", "達文西"]
        },
        E: {
            title: "堅毅的築夢者",
            img: "https://github.com/chenghua0216/figures/blob/main/Execution.png?raw=true",
            slogan: "「夢想若不落地，僅是幻影。」",
            desc: "你的優勢亮能是「實踐力」。你是讓夢想落地的人。你不僅止於空想，更重視行動。你具備強大的執行功能，能將創意拆解為步驟，並在真實生活中實踐出來。",
            code108: "★ 108 課綱 (A3 規劃執行)：將構想轉化為行動。",
            celebs: ["史蒂夫·賈伯斯", "張忠謀", "齊柏林"]
        }
    };

    let currentQ = 0;
    let scores = { C: 0, R: 0, D: 0, A: 0, T: 0, E: 0 };
    let isTransitioning = false;
    let userName = "";

    function goToNameScreen() {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('name-screen').style.display = 'block';
        setTimeout(() => document.getElementById('user-name-input').focus(), 100);
    }

    function startQuiz() {
        const nameInput = document.getElementById('user-name-input');
        userName = nameInput.value.trim();
        if (!userName) userName = "小小探險家";
        document.getElementById('name-screen').style.display = 'none';
        document.getElementById('quiz-screen').style.display = 'block';
        renderQuestion();
    }

    function renderQuestion() {
        const q = questions[currentQ];
        document.getElementById('progress').style.width = `${((currentQ) / questions.length) * 100}%`;
        document.getElementById('q-text').innerHTML = `Q${currentQ+1}. ${q.text}`;
        const area = document.getElementById('options-area');
        area.innerHTML = '';
        q.options.forEach(opt => {
            const btn = document.createElement('div');
            btn.className = 'option-card';
            btn.innerText = opt.text;
            btn.onclick = () => handleAnswer(opt.scores, btn);
            area.appendChild(btn);
        });
    }

    function handleAnswer(points, element) {
        if (isTransitioning) return;
        isTransitioning = true;
        if (element) element.classList.add('selected');
        setTimeout(() => {
            document.getElementById('question-container').style.opacity = '0';
            setTimeout(() => {
                for(let key in points) scores[key] += points[key];
                currentQ++;
                if (currentQ < questions.length) {
                    renderQuestion();
                    requestAnimationFrame(() => document.getElementById('question-container').style.opacity = '1');
                } else {
                    showResult();
                }
                isTransitioning = false;
            }, 300);
        }, 200);
    }

    function showResult() {
        document.getElementById('quiz-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';

        let maxVal = -1;
        let maxKey = 'C';
        for(let key in scores) {
            if(scores[key] > maxVal) {
                maxVal = scores[key];
                maxKey = key;
            }
        }

        const data = archetypes[maxKey];
        const colors = { C: "#6EC6CA", R: "#FF8E72", D: "#FFD56B", A: "#9575CD", T: "#4DB6AC", E: "#7986CB" };
        const cardColor = colors[maxKey] || "#6EC6CA";
        const celebsTags = data.celebs.map(c => `<span class="mini-tag">#${c}</span>`).join('');
        
        const cardHTML = `
            <div class="collectible-card">
                <div class="card-header-flex" style="background-color: ${cardColor};">
                    <div class="card-avatar-left" style="border-color: ${cardColor};">
                        <img src="${data.img}" alt="${data.title}">
                    </div>
                    <div class="card-info-right">
                        <div class="card-badge">CREATIVITY TYPE</div>
                        <h2 class="card-user-name">${userName}</h2>
                        <div class="card-title">${data.title}</div>
                    </div>
                </div>

                <div class="card-body">
                    <div class="card-chart-container">
                        <canvas id="cardRadarChart"></canvas>
                    </div>
                    <div class="card-slogan" style="color: ${cardColor};">
                        ${data.slogan}
                    </div>
                    <div class="tag-108">
                        ${data.code108}
                    </div>
                    <div class="card-desc">
                        ${data.desc}
                    </div>
                    <div class="card-footer-section">
                        <div class="card-footer-label">SIMILAR MINDS / 創意夥伴</div>
                        <div class="card-tags">
                            ${celebsTags}
                        </div>
                    </div>
                </div>
            </div>
        `;

        document.getElementById('card-placeholder').innerHTML = cardHTML;

        const ctx = document.getElementById('cardRadarChart').getContext('2d');
        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['覺察', '表達', '驅動', '合作', '探索', '實踐'],
                datasets: [{
                    label: '能力值',
                    data: [scores.C, scores.R, scores.D, scores.A, scores.T, scores.E],
                    backgroundColor: `${cardColor}40`,
                    borderColor: cardColor,
                    pointBackgroundColor: cardColor,
                    pointBorderColor: '#FFF',
                    borderWidth: 2,
                    pointRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: '#EEE' }, 
                        grid: { color: '#EEE' },
                        pointLabels: { font: { size: 11, family: 'Comic Sans MS', weight: 'bold' }, color: '#555' },
                        ticks: { display: false }, 
                        suggestedMin: 0,
                        suggestedMax: 12
                    }
                },
                plugins: { legend: { display: false } }
            }
        });
    }

    const modal = document.getElementById("info-modal");
    const modalText = document.getElementById("modal-text");
    const closeBtn = document.getElementsByClassName("close-modal")[0];

    document.querySelectorAll('.spectrum-icon-item').forEach(item => {
        item.addEventListener('click', (e) => {
            const fullText = item.getAttribute('data-desc');
            const parts = fullText.split('：');
            let title = parts.length > 1 ? parts[0] : "";
            let desc = parts.length > 1 ? parts.slice(1).join('：') : fullText;
            modalText.innerHTML = `<div class="modal-title-text">${title}</div><div class="modal-body-text">${desc}</div>`;
            modal.style.display = "flex";
        });
    });

    closeBtn.onclick = function() { modal.style.display = "none"; }
    window.onclick = function(event) { if (event.target == modal) modal.style.display = "none"; }
</script>

</body>
</html>

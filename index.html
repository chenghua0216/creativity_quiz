<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>立賢 CREATE 創造力亮能光譜</title>
    <!-- 引入 Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2c3e50;       /* 深藍：穩重 */
            --accent: #e67e22;        /* 橘色：創造力與活力 */
            --bg-color: #fdfbf7;      /* 米白：紙張質感 */
            --card-bg: #ffffff;
            --text-main: #333;
        }

        body {
            font-family: "Helvetica Neue", Helvetica, Arial, "PingFang TC", "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center; /* 垂直置中 */
            min-height: 100vh;
            box-sizing: border-box;
        }

        .container {
            width: 100%;
            max-width: 700px;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            padding: 40px;
            position: relative;
            transition: all 0.3s ease;
        }

        /* 標題區 */
        header { text-align: center; margin-bottom: 30px; }
        h1 { color: var(--primary); margin: 0 0 10px 0; font-size: 1.8rem; }
        .subtitle { color: #7f8c8d; font-size: 0.95rem; line-height: 1.6; }

        /* 六大亮能圖示列 (新樣式) */
        .spectrum-icons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .spectrum-icon-item {
            width: 70px;
            height: 70px;
            border-radius: 12px; /* 改為圓角矩形，不再是圓形 */
            background: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            padding: 5px; /* 增加一點內距，讓圖片完整呈現不貼邊 */
        }
        .spectrum-icon-item:hover {
            transform: scale(1.1);
            background: #fff;
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }
        .spectrum-icon-item img {
            width: 100%;
            height: 100%;
            object-fit: contain; /* 確保圖片完整顯示，不會被裁切 */
        }

        /* 按鈕通用樣式 */
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            display: block;
            margin: 20px auto 0;
            width: fit-content;
            font-weight: bold;
        }
        /* 避免手機上按鈕也有 sticky hover */
        @media (hover: hover) {
            .btn:hover {
                background-color: var(--accent);
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(230, 126, 34, 0.3);
            }
        }
        .btn:active {
            background-color: var(--accent);
            transform: translateY(0);
        }

        /* 測驗區塊 */
        .quiz-section { display: none; animation: fadeIn 0.5s; }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #eee;
            margin-bottom: 30px;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.4s ease;
        }

        /* 題目容器：加入透明度轉場，解決切換時的閃爍與殘留選取問題 */
        #question-container {
            transition: opacity 0.3s ease;
            opacity: 1;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 30px;
            line-height: 1.5;
            color: var(--primary);
        }

        .options-grid { display: grid; gap: 15px; }
        
        .option-card {
            background: #fff;
            border: 2px solid #ecf0f1;
            padding: 20px 25px;
            border-radius: 12px;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            color: #555;
            transition: all 0.2s;
            line-height: 1.5;
            -webkit-tap-highlight-color: transparent; /* 移除手機預設點擊灰底 */
        }

        /* === 修正：僅在支援滑鼠 Hover 的裝置顯示懸停效果 === */
        @media (hover: hover) {
            .option-card:hover {
                border-color: var(--accent);
                background: #fff8f0;
                transform: translateX(5px);
                color: var(--accent);
            }
        }

        /* === 手機觸控的 Active 效果 === */
        .option-card:active {
            border-color: var(--accent);
            background: #fff8f0;
            transform: scale(0.98); 
            color: var(--accent);
        }

        /* === 新增：選中狀態 (用於延遲期間保持高亮) === */
        .option-card.selected {
            border-color: var(--accent);
            background: #fff8f0;
            transform: scale(0.98);
            color: var(--accent);
        }

        /* 結果區塊 */
        .result-section { display: none; animation: fadeIn 0.8s; }
        
        .archetype-header { text-align: center; margin-bottom: 20px; }
        .archetype-label { font-size: 0.9rem; color: #999; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 5px; }
        .archetype-title { 
            font-size: 2.2rem; 
            color: var(--accent); 
            margin: 0 0 15px 0; 
            font-weight: 800; 
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap; /* 避免在小螢幕換行時跑版 */
            gap: 12px;
        }
        .archetype-slogan { font-style: italic; color: #666; font-size: 1rem; border-top: 1px solid #eee; border-bottom: 1px solid #eee; padding: 10px 0; display: inline-block;}

        .chart-container {
            position: relative;
            height: 320px;
            width: 100%;
            margin: 20px 0;
        }

        .analysis-box {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            border-left: 5px solid var(--accent);
        }

        .analysis-title { font-weight: bold; color: var(--primary); margin-bottom: 10px; display: flex; align-items: center; font-size: 1.1rem; }
        .analysis-text { font-size: 0.95rem; line-height: 1.7; color: #444; text-align: justify; }
        
        .tag-108 {
            display: inline-block;
            background: #e3f2fd;
            color: #1565c0;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            margin-top: 15px;
            font-weight: bold;
            line-height: 1.4;
        }

        .celebs-box {
            margin-top: 25px;
            text-align: center;
        }
        .celeb-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        .celeb-tag {
            background: white;
            border: 1px solid #ddd;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #555;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* RWD */
        @media (max-width: 600px) {
            .container { padding: 25px 20px; }
            .archetype-title { font-size: 1.6rem; }
            h1 { font-size: 1.5rem; }
            .option-card { padding: 15px; }
            .spectrum-icons { gap: 10px; }
            .spectrum-icon-item { width: 50px; height: 50px; }
        }
    </style>
</head>
<body>

<div class="container">
    <div id="start-screen">
        <header>
            <h1>CREATE 創造力亮能光譜</h1>
            <div class="subtitle">
                一起展開內在創造力的探索旅程，<br>
                分析你獨一無二的創造力性格。<br>
                <span style="font-size: 0.8em; color: #999;">(結合 108 課綱核心素養分析)</span>
            </div>
        </header>

        <!-- 六個圖案橫放區域，取代原本的燈泡 -->
        <div class="spectrum-icons">
            <!-- C: Consciousness -->
            <div class="spectrum-icon-item" title="覺察 (Consciousness)：「覺察」是創造力的起點。它超越了單純的看見，而是指能自我感官調節，細膩地接收內在的情緒波動以及外在環境的細微變化。這是一種勇於面對未知體驗的心理準備狀態。">
                <img src="https://github.com/chenghua0216/figures/blob/main/Consciousness.png?raw=true" alt="覺察力">
            </div>
            <!-- R: Realization -->
            <div class="spectrum-icon-item" title="表達 (Realization)：「表達」是內在轉化為外在的過程。這不僅僅是說話或畫畫，而是將無形的想法、複雜的情緒或抽象的觀點，透過適當的媒介（文字、圖像、肢體、聲音等）賦予形式，且能以獨特的方式與世界對話。">
                <img src="https://github.com/chenghua0216/figures/blob/main/Realization%20.png?raw=true" alt="表達力">
            </div>
            <!-- D: Engagement (Drive) -->
            <div class="spectrum-icon-item" title="驅動 (Engagement)：「驅動」關乎創造力的續航力。它不是為了外在獎勵獲肯定而做，而是源於內在的熱情、好奇或意義感。這是一種穩定的心理支持力量，讓我們在面對挑戰時，能自我激勵，甚至進入心流狀態的能力。">
                <img src="https://github.com/chenghua0216/figures/blob/main/Engagement.png?raw=true" alt="驅動力">
            </div>
            <!-- A: Alignment -->
            <div class="spectrum-icon-item" title="合作 (Alignment)：「合作」是將個人創造力擴展為集體智慧的關鍵。Alignment 原意為「校準」、「對齊」，這意味著合作不僅是分工，更是頻率的調和。我們需要理解他人的觀點，建立關係，並在保有自我的同時與團隊目標達成一致。這是同理心與社會技巧的綜合展現。">
                <img src="https://github.com/chenghua0216/figures/blob/main/Alignment%20.png?raw=true" alt="合作力">
            </div>
            <!-- T: Trial -->
            <div class="spectrum-icon-item" title="探索 (Trial)：「探索」是對現狀的挑戰與可能性的開拓。允許自己好奇與冒險，也有勇氣脫離舒適圈，去問「為什麼？」和「如果...會怎樣？」。這項能力著重於發散性思考以及對失敗的寬容，因為嘗試過程就存在價值。">
                <img src="https://github.com/chenghua0216/figures/blob/main/Trial.png?raw=true" alt="探索力">
            </div>
            <!-- E: Execution -->
            <div class="spectrum-icon-item" title="實踐 (Execution)：「實踐」是創造力旅程的終點，也是新循環的起點。將學習過程的啟發落實為真實生活中的選擇與行動，需要執行力、規劃力以及將抽象概念應用於現實生活的能力。">
                <img src="https://github.com/chenghua0216/figures/blob/main/Execution.png?raw=true" alt="實踐力">
            </div>
        </div>

        <button class="btn" onclick="startQuiz()">開始探索</button>

        <!-- 新增 Logo 區域 -->
        <div style="text-align: center; margin-top: 40px; opacity: 0.9;">
            <img src="https://github.com/chenghua0216/figures/blob/main/logo.png?raw=true" alt="立賢教育基金會 Logo" style="width: 150px; height: auto;">
        </div>
    </div>

    <div id="quiz-screen" class="quiz-section">
        <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
        <div id="question-container">
            <div class="question-text" id="q-text"></div>
            <div class="options-grid" id="options-area"></div>
        </div>
    </div>

    <div id="result-screen" class="result-section">
        <div class="archetype-header">
            <div class="archetype-label">你的創造力性格原型</div>
            <h2 class="archetype-title" id="r-title">分析中...</h2>
            <div class="archetype-slogan" id="r-slogan"></div>
        </div>

        <div class="chart-container">
            <canvas id="radarChart"></canvas>
        </div>

        <div class="analysis-box">
            <div class="analysis-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
                性格解析與素養連結
            </div>
            <div class="analysis-text" id="r-desc"></div>
            <div id="r-108"></div>
        </div>

        <div class="celebs-box">
            <div style="font-weight: bold; color: var(--primary); margin-bottom: 10px; font-size: 0.9rem;">相同光譜名人參考</div>
            <div class="celeb-list" id="r-celebs"></div>
        </div>

        <button class="btn" onclick="location.reload()">重新測驗</button>
    </div>
</div>

<script>
    // === 資料庫設定 ===
    
    // 定義六大亮能
    // C: Consciousness (覺察), R: Realization (表達), D: Drive (驅動/Engagement)
    // A: Alignment (合作), T: Trial (探索), E: Execution (實踐)
    const traits = {
        C: "覺察力 (Consciousness)",
        R: "表達力 (Realization)",
        D: "驅動力 (Drive)",
        A: "合作力 (Alignment)",
        T: "探索力 (Trial)",
        E: "實踐力 (Execution)"
    };

    // 題目設計：根據 36 個創意提示列表改編，總計 12 題
    const questions = [
        // 1. 自我探索 (Self-Discovery)
        {
            text: "當我感到「創造力消失」的時候，我通常會？",
            options: [
                { text: "閉上眼什麼都不做，讓自己休息，靜靜等待靈感回流。", scores: { C: 3, D: 1 } },
                { text: "雖然痛苦，但我會強迫自己繼續做下去，直到突破瓶頸。", scores: { D: 3, E: 1 } },
                { text: "找朋友聊聊天，或許他們的幾句話就能重新點燃我。", scores: { A: 3, R: 1 } }
            ]
        },
        // 2. 自我探索 (Self-Discovery)
        {
            text: "如果必須用一種樂器來代表你的個性，你會選擇？",
            options: [
                { text: "鋼琴或小提琴。能細膩地表達情感，也能展現豐富的層次。", scores: { R: 3, C: 1 } },
                { text: "爵士鼓。充滿節奏感與爆發力，是驅動整首樂曲的心臟。", scores: { D: 3, E: 1 } },
                { text: "電子合成器。充滿實驗性，能創造出前所未有的聲音。", scores: { T: 3, R: 1 } }
            ]
        },
        // 3. 觀察與欣賞 (Observation)
        {
            text: "在路邊看到一個被丟棄、生鏽的鐵罐，你的第一個反應是？",
            options: [
                { text: "覺得它生鏽的紋理和顏色很美，彷彿看見了時間的痕跡。", scores: { C: 3, R: 1 } },
                { text: "思考它為什麼會在這裡？原本是裝什麼的？背後有什麼故事？", scores: { T: 3, C: 1 } },
                { text: "想撿起來帶回去，也許能在下次創作或改造中派上用場。", scores: { E: 3, T: 1 } }
            ]
        },
        // 4. 觀察與欣賞 (Observation)
        {
            text: "找出一件原本被視為「廢棄物」的紙箱，你會如何賦予它新生命？",
            options: [
                { text: "拿起畫筆在上面塗鴉，把它變成一件獨特的裝置藝術。", scores: { R: 3, T: 1 } },
                { text: "動手裁剪拼貼，把它改造成實用的收納盒或貓屋。", scores: { E: 3, A: 1 } },
                { text: "邀請孩子或朋友一起來，用它搭建一個秘密基地。", scores: { A: 3, D: 1 } }
            ]
        },
        // 5. 發明與解決問題 (Invention)
        {
            text: "如果受邀設計一台「讓生氣的人瞬間笑出來」的機器，你的設計核心是？",
            options: [
                { text: "感應情緒機制。先同理他的憤怒，再給予溫暖的擁抱。", scores: { C: 3, A: 1 } },
                { text: "瘋狂實驗室。隨機噴出彩帶、播放怪聲音，用出乎意料的方式逗樂他。", scores: { T: 3, R: 1 } },
                { text: "搔癢機械手臂。直接針對生理反應，用最實際的物理方式讓他笑。", scores: { E: 3, D: 1 } }
            ]
        },
        // 6. 發明與解決問題 (Invention)
        {
            text: "想像一種混合了兩種現有動物的新生物，你會最在意牠的什麼？",
            options: [
                { text: "牠的外型是否獨特美觀，我會想把牠詳細地畫下來。", scores: { R: 3, C: 1 } },
                { text: "牠在生態系中的功能，例如是否能幫助環境或保護其他弱小動物。", scores: { A: 3, E: 1 } },
                { text: "牠的生存能力，例如是否有強大的翅膀或適應極端氣候的能力。", scores: { T: 3, D: 1 } }
            ]
        },
        // 7. 想像力與假設 (Imagination)
        {
            text: "如果真的能跟植物溝通，你會對路邊的小草說什麼？",
            options: [
                { text: "「你在這裡過得好嗎？有沒有什麼不舒服的地方？」", scores: { C: 3, A: 1 } },
                { text: "「你的根是怎麼往下鑽的？教我你生存的秘訣！」", scores: { T: 3, E: 1 } },
                { text: "我不會說話，我會對著它唱歌，分享我的快樂。", scores: { R: 3, D: 1 } }
            ]
        },
        // 8. 想像力與假設 (Imagination)
        {
            text: "想像世界上的地心引力突然減半，你覺得生活最大的改變是？",
            options: [
                { text: "新的運動與交通方式會誕生，人類將發明更多飛行的裝置。", scores: { T: 3, E: 1 } },
                { text: "人們的肢體語言會變得更輕盈優雅，舞蹈和表演藝術會徹底改變。", scores: { R: 3, C: 1 } },
                { text: "大家能更輕鬆地搬運重物，互相幫助的門檻變低了。", scores: { A: 3, E: 1 } }
            ]
        },
        // 9. 創造力哲學 (Philosophy of Creativity)
        {
            text: "關於「說謊」和「講故事」，你認為這兩者的差別在於？",
            options: [
                { text: "意圖的不同。一個是為了欺騙，一個是為了啟發或感動。", scores: { C: 3, A: 1 } },
                { text: "技巧的高低。講故事需要更高的架構能力與表達技巧。", scores: { R: 3, E: 1 } },
                { text: "結果的真實性。故事是為了創造一個新的真實，謊言是為了掩蓋舊的真實。", scores: { T: 3, C: 1 } }
            ]
        },
        // 10. 創造力哲學 (Philosophy of Creativity)
        {
            text: "如果 AI 機器人畫了一幅很美的畫，你認為它具有創造力嗎？",
            options: [
                { text: "不算。它缺乏「靈魂」與「內在驅動力」，只是模仿數據的結果。", scores: { D: 3, C: 1 } },
                { text: "算。只要產出的結果能解決視覺問題或帶來美感，就是創造。", scores: { E: 3, T: 1 } },
                { text: "不重要。重要的是這幅畫能否連結人心，引發大家的討論。", scores: { A: 3, R: 1 } }
            ]
        },
        // 11. 行動與遊戲 (Action & Play)
        {
            text: "現在試著用你的「非慣用手」寫下名字或畫個圓，你的感受是？",
            options: [
                { text: "好不舒服，但我喜歡這種挑戰大腦、跳脫舒適圈的感覺。", scores: { T: 3, D: 1 } },
                { text: "線條歪歪扭扭的，這其實有一種拙趣和獨特的美感。", scores: { R: 3, C: 1 } },
                { text: "我會多練習幾次，直到我能控制肌肉，把它寫得工整為止。", scores: { E: 3, D: 1 } }
            ]
        },
        // 12. 行動與遊戲 (Action & Play)
        {
            text: "如果要發明一種新的「打招呼方式」並教給朋友，你會設計？",
            options: [
                { text: "一個包含擊掌、轉圈的複雜動作，充滿活力與儀式感。", scores: { D: 3, E: 1 } },
                { text: "一個眼神交流搭配手勢，能瞬間確認彼此的默契與連結。", scores: { A: 3, C: 1 } },
                { text: "一個搞怪的鬼臉或聲音，目的是為了打破尷尬，讓氣氛輕鬆。", scores: { R: 3, T: 1 } }
            ]
        }
    ];

    // 結果分析資料庫 (對應最高分的亮能)
    const archetypes = {
        C: {
            title: "澄澈的哲思者 (The Seer)",
            img: "https://github.com/chenghua0216/figures/blob/main/Consciousness.png?raw=true",
            slogan: "「於靜默中聽見雷鳴，於微塵中看見世界。」",
            desc: "你的優勢亮能是「覺察力」。你擁有極敏銳的感知能力，這不僅是對外在環境的觀察，更是對內在情緒的覺知。在喧囂的世界中，你總能保持清醒，看見別人忽略的本質。",
            code108: "★ 108 課綱連結 (A1 身心素質)：你的覺察力是「自我精進」的起點，具備理解並調適身心狀態的基礎能力。",
            celebs: ["達賴喇嘛 (精神領袖)", "珍·古德 (動物學家)", "是枝裕和 (導演)"]
        },
        R: {
            title: "靈魂的轉譯者 (The Creator)",
            img: "https://github.com/chenghua0216/figures/blob/main/Realization%20.png?raw=true",
            slogan: "「將無形化為有形，讓世界聽見你的頻率。」",
            desc: "你的優勢亮能是「表達力」。你是天生的溝通者，擅長將抽象的想法、複雜的情緒轉化為具體的作品。無論透過文字、藝術或語言，你總能賦予無形事物有形的感動。",
            code108: "★ 108 課綱連結 (B1 符號運用)：這正是「表達力」的核心，你具備透過多元媒介進行溝通與創作的素養。",
            celebs: ["宮崎駿 (動畫大師)", "J.K. 羅琳 (作家)", "林懷民 (雲門舞集)"]
        },
        D: {
            title: "熱情的燃燈者 (The Driver)",
            img: "https://github.com/chenghua0216/figures/blob/main/Engagement.png?raw=true",
            slogan: "「內在的火炬，是推動世界前進的燃料。」",
            desc: "你的優勢亮能是「驅動力」。你擁有源源不絕的內在引擎，不需要外在獎賞，挑戰本身就是你的養分。你容易進入「心流」狀態，擁有強大的心理韌性。",
            code108: "★ 108 課綱連結 (A1/自主行動)：驅動力是「自主行動」的燃料。你具備終身學習者最關鍵的「內在動機」。",
            celebs: ["Kobe Bryant (曼巴精神)", "馬友友 (熱愛音樂)", "湯姆·克魯斯 (極致追求)"]
        },
        A: {
            title: "溫暖的編織者 (The Connector)",
            img: "https://github.com/chenghua0216/figures/blob/main/Alignment%20.png?raw=true",
            slogan: "「一個人走得快，一群人走得遠。」",
            desc: "你的優勢亮能是「合作力」。你是團隊中的黏著劑，深知連結的力量。你擅長傾聽、換位思考，並能整合不同意見，創造 1+1>2 的共好價值。",
            code108: "★ 108 課綱連結 (C2 人際關係)：完美對應。你具備理解他人、建立良好互動並參與團隊合作的素養。",
            celebs: ["歐巴馬 (擅長連結)", "歐普拉 (共感傾聽)", "德蕾莎修女 (人道主義)"]
        },
        T: {
            title: "無畏的拓荒者 (The Explorer)",
            img: "https://github.com/chenghua0216/figures/blob/main/Trial.png?raw=true",
            slogan: "「未知不是恐懼，而是邀請。」",
            desc: "你的優勢亮能是「探索力」。你的好奇心是你最大的資產。你不怕犯錯，甚至享受試錯的過程。你喜歡問「為什麼」和「如果...會怎樣」，是打破框架的創新者。",
            code108: "★ 108 課綱連結 (A2 系統思考)：你的探索精神是解決問題的基石，具備面對未知主動提問與創新應變的能力。",
            celebs: ["伊隆·馬斯克 (SpaceX)", "理查·費曼 (科學頑童)", "達文西 (跨域探索)"]
        },
        E: {
            title: "堅毅的築夢者 (The Doer)",
            img: "https://github.com/chenghua0216/figures/blob/main/Execution.png?raw=true",
            slogan: "「夢想若不落地，僅是幻影。」",
            desc: "你的優勢亮能是「實踐力」。你是讓夢想落地的人。你不僅止於空想，更重視行動。你具備強大的執行功能，能將創意拆解為步驟，並在真實生活中實踐出來。",
            code108: "★ 108 課綱連結 (A3 規劃執行)：強調將構想轉化為行動。你具備規劃、執行並在生活中落實創意的能力。",
            celebs: ["史蒂夫·賈伯斯 (蘋果)", "張忠謀 (台積電)", "齊柏林 (看見台灣)"]
        }
    };

    // === 程式邏輯 ===
    let currentQ = 0;
    let scores = { C: 0, R: 0, D: 0, A: 0, T: 0, E: 0 };
    let isTransitioning = false; // 防止重複點擊的旗標

    function startQuiz() {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('quiz-screen').style.display = 'block';
        renderQuestion();
    }

    function renderQuestion() {
        const q = questions[currentQ];
        
        // 更新 UI
        document.getElementById('progress').style.width = `${((currentQ) / questions.length) * 100}%`;
        document.getElementById('q-text').innerText = `Q${currentQ+1}. ${q.text}`;
        
        const area = document.getElementById('options-area');
        area.innerHTML = '';

        q.options.forEach(opt => {
            const btn = document.createElement('div');
            btn.className = 'option-card';
            btn.innerText = opt.text;
            // 傳入 btn 元素本身，以便添加 .selected 樣式
            btn.onclick = () => handleAnswer(opt.scores, btn);
            area.appendChild(btn);
        });
    }

    function handleAnswer(points, element) {
        // 如果正在轉場中，忽略點擊
        if (isTransitioning) return;
        isTransitioning = true;

        // 1. 選取狀態 (橘色高亮)
        if (element) {
            element.classList.add('selected');
        }

        // 2. 稍微停頓讓使用者看到選擇 (200ms)
        setTimeout(() => {
            const qContainer = document.getElementById('question-container');
            
            // 3. 淡出舊題目
            qContainer.style.opacity = '0';
            
            // 4. 等待淡出動畫結束 (300ms)
            setTimeout(() => {
                // 累加分數
                for(let key in points) {
                    scores[key] += points[key];
                }

                currentQ++;
                if (currentQ < questions.length) {
                    renderQuestion(); // 渲染新題目
                    
                    // 5. 淡入新題目
                    requestAnimationFrame(() => {
                        qContainer.style.opacity = '1';
                    });
                } else {
                    showResult(); // 顯示結果
                }
                
                isTransitioning = false;
            }, 300); // 配合 CSS transition 時間
        }, 200); // 點擊後的視覺暫留時間
    }

    function showResult() {
        document.getElementById('quiz-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';

        // 1. 找出最高分
        let maxVal = -1;
        let maxKey = 'C';
        for(let key in scores) {
            if(scores[key] > maxVal) {
                maxVal = scores[key];
                maxKey = key;
            }
        }

        // 2. 填入內容
        const data = archetypes[maxKey];
        // 加入圖片到標題中
        document.getElementById('r-title').innerHTML = `
            <img src="${data.img}" alt="${data.title}" style="width: 50px; height: 50px; border-radius: 8px; object-fit: contain;">
            ${data.title}
        `;
        document.getElementById('r-slogan').innerText = data.slogan;
        document.getElementById('r-desc').innerText = data.desc;
        document.getElementById('r-108').innerHTML = `<span class="tag-108">${data.code108}</span>`;

        // 3. 填入名人
        const celebHTML = data.celebs.map(c => `<div class="celeb-tag">★ ${c}</div>`).join('');
        document.getElementById('r-celebs').innerHTML = celebHTML;

        // 4. 繪製雷達圖
        const ctx = document.getElementById('radarChart').getContext('2d');
        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['覺察力', '表達力', '驅動力', '合作力', '探索力', '實踐力'],
                datasets: [{
                    label: '你的亮能光譜',
                    data: [scores.C, scores.R, scores.D, scores.A, scores.T, scores.E],
                    backgroundColor: 'rgba(230, 126, 34, 0.2)',
                    borderColor: 'rgba(230, 126, 34, 1)',
                    pointBackgroundColor: '#2c3e50',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#2c3e50',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: '#eee' },
                        grid: { color: '#eee' },
                        pointLabels: { 
                            font: { size: 14, family: 'sans-serif', weight: 'bold' }, 
                            color: '#555' 
                        },
                        ticks: { display: false }, // 隱藏數值標籤，讓圖面更乾淨
                        suggestedMin: 0,
                        suggestedMax: 12
                    }
                },
                plugins: { legend: { display: false } }
            }
        });
    }
</script>

</body>
</html>
